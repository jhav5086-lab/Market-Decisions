<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Decisions - MMM Consulting</title>
    <style>
        /* Your existing CSS remains exactly the same */
        /* ... all your CSS code ... */
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="loaded">
    <!-- Your existing HTML remains exactly the same -->
    <!-- ... all your HTML code ... -->

    <script>
        // Your existing JavaScript for navigation, scrolling, etc.
        // ... all your existing JavaScript ...

        // Form submission handler - FINAL WORKING VERSION
        document.getElementById('marketing-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const form = this;
            const submitButton = form.querySelector('.form-submit');
            const messageDiv = document.getElementById('form-message');
            
            // Show loading state
            submitButton.classList.add('loading');
            submitButton.disabled = true;
            
            // Get form data
            const formData = new FormData(form);
            
            // Build URL parameters
            const params = new URLSearchParams();
            params.append('name', formData.get('name'));
            params.append('email', formData.get('email'));
            params.append('company', formData.get('company') || '');
            params.append('phone', formData.get('phone') || '');
            params.append('website', formData.get('website') || '');
            params.append('monthly_budget', formData.get('monthly_budget') || '');
            params.append('challenges', formData.get('challenges') || '');
            
            // Handle checkboxes
            const goals = Array.from(formData.getAll('goals'));
            params.append('goals', goals.join(', '));
            
            // Your LATEST Web App URL (Version 6)
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxcLFu-K9kshnQprbeBNKtFKBJul9QwcwQDM2qWn1rA20qhSFb5b0-LQ93hgA7k7u1iFA/exec';
            
            // Simple POST request - THIS WILL WORK
            fetch(scriptURL, {
                method: 'POST',
                body: params
            })
            .then(response => response.text())
            .then(result => {
                console.log('Server response:', result);
                
                if (result === 'Success') {
                    messageDiv.textContent = 'Thank you! Your consultation request has been submitted successfully. We will contact you shortly.';
                    messageDiv.className = 'form-message success';
                    form.reset();
                } else {
                    throw new Error('Server returned: ' + result);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                messageDiv.textContent = 'Sorry, there was an error submitting your form. Please try again or contact us directly.';
                messageDiv.className = 'form-message error';
            })
            .finally(() => {
                submitButton.classList.remove('loading');
                submitButton.disabled = false;
                messageDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        });
    </script>
</body>
</html>
